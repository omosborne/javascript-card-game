<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="gameboard.css" rel="stylesheet">
    <!--<script src="gamelogic.js"></script>-->
    <script>
        let is_droppable = false;
        let chosen_position = null;

        function choose_card(selected_pos) {
            //let selected_card = document.getElementsByClassName(child_class)
            //selected_card.style.visibility = "hidden";
            // selected_pos.closest(".card").remove();
            //let child_class = selected_pos.firstChild;
            //selected_pos.removeChild(child_class);
            //document.getElementById("pl_hand_pos_1").innerHTML = selected_pos.firstElementChild.innerHTML;
            //const myNode = document.getElementById("foo");
            selected_pos.innerHTML = '';

            const move_card_div = document.createElement("div");
            move_card_div.className = "card";
            move_card_div.id = "move_card"

            const move_card_img = document.createElement("img");
            move_card_img.setAttribute('src', 'example_card.png');
            move_card_img.setAttribute('alt', 'example');
            move_card_img.setAttribute('width', '100');
            move_card_img.setAttribute('ondragstart', 'return false;');

            move_card_div.appendChild(move_card_img);

            //const currentDiv = document.getElementById(selected_pos);
            //document.body.insertBefore(move_card_div, selected_pos);
            //selected_pos.appendChild(move_card_div);
            document.body.appendChild(move_card_div);


            const onMouseMove = (e) =>{
                move_card_div.style.left = e.pageX + 'px';
                move_card_div.style.top = e.pageY + 'px';
            }

            document.addEventListener('mousemove', onMouseMove);

            const onMouseUp = (e) =>{
                if (is_droppable){
                    const dropped_card_div = document.createElement("div");
                    dropped_card_div.className = "card";

                    const dropped_card_img = document.createElement("img");
                    dropped_card_img.setAttribute('src', 'example_card.png');
                    dropped_card_img.setAttribute('alt', 'example');
                    dropped_card_img.setAttribute('width', '100');
                    dropped_card_img.setAttribute('ondragstart', 'return false;');

                    dropped_card_div.appendChild(dropped_card_img);
                    chosen_position.appendChild(dropped_card_div);
                }
                move_card_div.innerHTML = '';
                move_card_div.remove();
            }

            document.addEventListener('mouseup', onMouseUp);



        }

        function droppable(mouseOver, chosen_pos){
            is_droppable = mouseOver;
            chosen_position = chosen_pos;
        }

        function highlight_card(selected_pos){
            selected_pos.style.transform = "translateX(20px)";
        }

        function unhighlight_card(selected_pos){
            selected_pos.style.transform = "translateX(0px)";
        }
    </script>
    <style>
        #move_card {
            position: absolute;
        }
    </style>
</head>
<body>
    <div class="game_info">

    </div>
    <div class="game_area">
        <div class="area" id="player_area">
            <div class="hand" id="player_hand">
                <div style="background-color: green; width: 100px" class="hand_position" id="pl_hand_pos_1" onmousedown="choose_card(this)" onmouseenter="highlight_card(this)" onmouseleave="unhighlight_card(this)">
                    <div class="card">
                        <img src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="pl_hand_pos_2" onmouseenter="highlight_card(this)" onmouseleave="unhighlight_card(this)">
                    <div class="card">
                        <img onmousedown="choose_card(this)" src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="pl_hand_pos_3" onmouseenter="highlight_card(this)" onmouseleave="unhighlight_card(this)">
                    <div class="card">
                        <img onmousedown="choose_card(this)" src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="pl_hand_pos_4" onmouseenter="highlight_card(this)" onmouseleave="unhighlight_card(this)">
                    <div class="card">
                        <img onmousedown="choose_card(this)" src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="pl_hand_pos_5" onmouseenter="highlight_card(this)" onmouseleave="unhighlight_card(this)">
                    <div class="card">
                        <img onmousedown="choose_card(this)" src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
            </div>
        </div>

        <div class="board">
            <div class="row" id="row_1">
                <div class="position" id="position_1" onmouseenter="droppable(true, this)" onmouseleave="droppable(false, this)">
                    <div class="card">

                    </div>
                </div>
                <div class="position" id="position_2">
                    <div class="card">

                    </div>
                </div>
                <div class="position" id="position_3">
                    <div class="card">

                    </div>
                </div>
            </div>

            <div class="row" id="row_2">
                <div class="position" id="position_4">
                    <div class="card">

                    </div>
                </div>
                <div class="position" id="position_5">
                    <div class="card">

                    </div>
                </div>
                <div class="position" id="position_6">
                    <div class="card">

                    </div>
                </div>
            </div>

            <div class="row" id="row_3">
                <div class="position" id="position_7">
                    <div class="card">

                    </div>
                </div>
                <div class="position" id="position_8">
                    <div class="card">

                    </div>
                </div>
                <div class="position" id="position_9">
                    <div class="card">

                    </div>
                </div>
            </div>
        </div>

        <div class="area" id="opponent_area">
            <div class="hand" id="opponent_hand">
                <div class="hand_position" id="op_hand_pos_1">
                    <div class="card">
                        <img src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="op_hand_pos_2">
                    <div class="card">
                        <img src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="op_hand_pos_3">
                    <div class="card">
                        <img src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="op_hand_pos_4">
                    <div class="card">
                        <img src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
                <div class="hand_position" id="op_hand_pos_5">
                    <div class="card">
                        <img src="example_card.png" alt="example" ondragstart="return false;">
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>
</html>